(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["plugins/advance/index/index"],{"25b8":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n("a34a")),i=n("2f62");function a(e){return e&&e.__esModule?e:{default:e}}function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(n,!0).forEach(function(t){u(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(e){return h(e)||f(e)||l()}function l(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function f(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function h(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}function p(e,t,n,r,i,a,c){try{var o=e[a](c),u=o.value}catch(s){return void n(s)}o.done?t(u):Promise.resolve(u).then(r,i)}function d(e){return function(){var t=this,n=arguments;return new Promise(function(r,i){var a=e.apply(t,n);function c(e){p(a,r,i,c,o,"next",e)}function o(e){p(a,r,i,c,o,"throw",e)}c(void 0)})}}var m=function(){return n.e("plugins/advance/components/search-input").then(n.bind(null,"782c"))},v=function(){return n.e("plugins/advance/components/index-swipe").then(n.bind(null,"6cd0"))},g=function(){return n.e("plugins/advance/components/index-product-list").then(n.bind(null,"51af"))},b={name:"index",data:function(){return{product_list:[],picture_list:[],page_count:1,interval:null,page:1}},onHide:function(){clearInterval(this.interval)},onUnload:function(){clearInterval(this.interval)},onLoad:function(){var e=this;this.requestBanner().then(function(){e.requestList()}),wx.showShareMenu({menus:["shareAppMessage","shareTimeline"]})},methods:{cutoffTime:function(e){var t=this,n=(new Date).getTime();e.map(function(r,i){var a=new Date(r.advanceGoods.end_prepayment_at.replace(/-/g,"/")).getTime(),c=a-n;if(c>0){var o=parseInt(c/1e3/60/60/24),u=parseInt(c/1e3/60/60%24),s=parseInt(c/1e3/60%60),l=parseInt(c/1e3%60);o>0?t.$set(e[i],"html","".concat(o,"å¤©").concat(u,":").concat(s<10?"0"+s:s,":").concat(l<10?"0"+l:l)):t.$set(e[i],"html","".concat(u,":").concat(s<10?"0"+s:s,":").concat(l<10?"0"+l:l))}else t.$delete(e,i),t.product_list.length<10&&t.page_count>1&&(t.product_list=[],t.requestList())})},set_interval:function(){var e=this;clearInterval(this.interval),this.cutoffTime(this.product_list),this.interval=setInterval(function(){e.cutoffTime(e.product_list)},1e3)},requestList:function(){var e=d(r.default.mark(function e(){var t,n;return r.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$request({url:this.$api.advance.goods,method:"get",data:{page:this.page}});case 2:t=e.sent,0===t.code&&((n=this.product_list).push.apply(n,s(t.data.list)),this.page_count=t.data.pagination.page_count,this.set_interval());case 4:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),requestBanner:function(){var e=d(r.default.mark(function e(){var t=this;return r.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:this.$request({url:this.$api.advance.banner,method:"get"}).then(function(e){0===e.code&&(t.picture_list=e.data.list)});case 1:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},components:{"search-input":m,"index-swipe":v,"product-list":g},onShareAppMessage:function(){return this.$shareAppMessage({path:"/plugins/advance/index/index",title:this.$children[0].navigationBarTitle})},onShareTimeline:function(){return this.$shareTimeline({title:this.$children[0].navigationBarTitle,query:{}})},computed:o({},(0,i.mapGetters)("mallConfig",{getTheme:"getTheme"}),{themeObject:function(){return{back:this.getTheme+"-m-back "+this.getTheme,backQ:this.getTheme+"-m-back-q "+this.getTheme,theme:this.getTheme,color:this.getTheme+"-m-text "+this.getTheme,sBack:this.getTheme+"-s-back "+this.getTheme}}}),onReachBottom:function(){this.page<this.page_count&&(this.page++,this.requestList())}};t.default=b},"9d82":function(e,t,n){"use strict";n.r(t);var r=n("25b8"),i=n.n(r);for(var a in r)"default"!==a&&function(e){n.d(t,e,function(){return r[e]})}(a);t["default"]=i.a},a7ec:function(e,t,n){"use strict";var r=n("b24f"),i=n.n(r);i.a},b24f:function(e,t,n){},c85a:function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement;e._self._c},i=[];n.d(t,"a",function(){return r}),n.d(t,"b",function(){return i})},e329:function(e,t,n){"use strict";n.r(t);var r=n("c85a"),i=n("9d82");for(var a in i)"default"!==a&&function(e){n.d(t,e,function(){return i[e]})}(a);n("a7ec");var c=n("2877"),o=Object(c["a"])(i["default"],r["a"],r["b"],!1,null,"58b7b61f",null);t["default"]=o.exports}},[["c00f","common/runtime","common/vendor"]]]);